(function(window){var jQMethod=function(){};jQMethod.fn=jQMethod.prototype={storage:{setParam:function(_k,_v){localStorage.setItem(_k,_v)},clear:function(){localStorage.clear()},},};var JQMethod=new jQMethod();jQMethod.prototype=JQMethod;window.JQMethod=new jQMethod();$.formatDate=function(obj,format){var date;if(obj instanceof Date){date=obj}else{if(this.type(obj)==="number"){date=new Date(obj)}else{throw new Error("illegal arguments,only can be Date or millisecond")}}if(!format){format="yyyy-MM-dd hh:mm:ss"}var o={"M+":date.getMonth()+1,"d+":date.getDate(),"h+":date.getHours(),"m+":date.getMinutes(),"s+":date.getSeconds(),"q+":Math.floor((date.getMonth()+3)/3),"S":date.getMilliseconds()};if(/(y+)/.test(format)){format=format.replace(RegExp.$1,(date.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(format)){format=format.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length))}}return format};$.getUrlParam=function(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)");var r=window.location.search.substr(1).match(reg);if(r!==null){return unescape(r[2])}return null};$.fn.pagging=function(opts){var defaults={current:1,pagesize:10,sum:0,param:{},callback:null};var options=$.extend(defaults,opts||{});return this.each(function(){$this=$(this);var pages=Math.ceil(options.sum/options.pagesize);var html=[];html.push("<ul >");if(pages===0||pages===1){html.push('<li class="disabled" data-idx = "-1"><a href ="javascript:void(0);">上一页</a></li>');html.push('<li class="active" data-idx = "-1"><a href ="javascript:void(0);">1</a></li>');html.push('<li class="disabled" data-idx = "-1"><a href ="javascript:void(0);">下一页</a></li>')}else{html.push("<li "+(options.current==1?'class="disabled" data-idx = "-1"':'data-idx="'+(options.current-1)+'"')+">");html.push('<a href ="javascript:void(0);">上一页</a></li>');if(pages>10){var flag=false;for(var i=1;i<=pages;i++){if(i<=3){html.push("<li "+(options.current==i?'class="active" data-idx = "-1"':'data-idx="'+i+'"')+">");html.push('<a href ="javascript:void(0);">'+i+"</a></li>");continue}if((i==4)&&!flag&&(options.current<=3||options.current==pages)){html.push('<li class="disabled" data-idx = "-1" ><a href ="javascript:void(0);"> ... </a></li>');flag=true}if(options.current>=4&&options.current<=pages-1){if(i==options.current-2){html.push('<li class="disabled" data-idx = "-1" ><a href ="javascript:void(0);"> ... </a></li>')}if(i>=options.current-1&&i<=options.current+1){html.push("<li "+(options.current==i?'class="active" data-idx = "-1"':'data-idx="'+i+'"')+">");html.push('<a href ="javascript:void(0);">'+i+"</a></li>")}if(i==options.current+2){html.push('<li class="disabled" data-idx = "-1" ><a href ="javascript:void(0);"> ... </a></li>')}}}}else{for(var j=1;j<=pages;j++){html.push("<li "+(options.current==j?'class="active" data-idx = "-1"':'data-idx="'+j+'"')+">");html.push('<a href ="javascript:void(0);">'+j+"</a></li>")}}html.push("<li "+(options.current==pages?'class="disabled" data-idx = "-1"':'data-idx="'+(options.current+1)+'"')+">");html.push('<a href ="javascript:void(0);">下一页</a></li>')}html.push("</ul>");$this.html(html.join(""));if($.isFunction(options.callback)){$this.find("ul>li").click(function(){var idx=$(this).data("idx");if(idx!=-1){options.callback(idx,options.param)}})}})};$.fn.customAjax=function(url,data,async,type,dataType,beforeSendfn,successfn,errorfn,completefn){async=(async==null||async==""||typeof(async)=="undefined")?"true":async;type=(type==null||type==""||typeof(type)=="undefined")?"post":type;dataType=(dataType==null||dataType==""||typeof(dataType)=="undefined")?"json":dataType;data=(data==null||data==""||typeof(data)=="undefined")?{"date":new Date().getTime()}:data;$.ajax({type:type,async:async,data:data,url:url,dataType:dataType,timeout:20000,beforeSend:function(){},success:function(data){successfn(data)},error:function(data,status,thrown){errorfn(data,status,thrown)},complete:function(){}})}})(window);